"use strict";(self.webpackChunkweb_shop=self.webpackChunkweb_shop||[]).push([[440],{6059:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var o=a(5043),l=a(239),r=a(2761),s=a(6051),n=a(7021),i=a(914),d=a(4417),c=a(5789),u=a(164),p=a(5337),h=a(9948),m=a(3388),x=a(5041),g=a(579);const v="products";function f(){var e,t;const[a,f]=(0,o.useState)(null),[S,j]=(0,o.useState)(""),{create:y,data:k,loading:I}=(0,x.wd)(),[A,w]=(0,o.useState)({skip:0,take:10,search:""}),{fetch:N,data:q,loading:C}=(0,x.LV)();(0,o.useEffect)((()=>{N({url:v,query:JSON.stringify(A)})}),[A,k]);const L=e=>{let t=0;return e&&e.forEach((e=>{t+=parseInt(e.qty)-parseInt(e.laps)})),t},[P,R]=(0,o.useState)([]),b=[{title:"Image",dataIndex:"images",render:e=>{const t=e&&e.length>0?e[0]:null;return t?(0,g.jsx)(r.A,{shape:"square",src:t}):(0,g.jsx)(m.JWk,{size:30})}},{title:"Product Name",dataIndex:"title",sorter:!0},{title:"Ean Barcode",dataIndex:"ean",sorter:!0},{title:"platform",dataIndex:"",sorter:!0},{title:"Sold Amount",dataIndex:"",sorter:!0},{title:"Sold Qty",dataIndex:"",sorter:!0},{title:"InStock Qty",dataIndex:"stores",render:e=>L(e)}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{pageName:"Products"}),(0,g.jsx)("div",{className:"headerRight",children:(0,g.jsxs)(s.A,{children:[(0,g.jsx)(n.Ay,{onClick:()=>{var e,t;N({url:"allproduct",query:JSON.stringify("")});const a=null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.filter((e=>e.stores.length>0));if((null===q||void 0===q||null===(t=q.data)||void 0===t?void 0:t.length)>10&&(null===a||void 0===a?void 0:a.length)>0){const e=a.map((e=>{const t=e.stores.map((e=>`Location: ${e.location}, Quantity: ${e.qty}, Laps: ${e.laps}`)).join("\n");return{Title:e.title||"",EanBarcode:e.ean||"",Price:e.price||"",TotalStock:L(e.stores)||"",SellingPrice:e.minSellingPrice||"",SupplierRef:e.supplierRef||"",Platform:e.platform||"",StoreInfo:t,Image:e.images||""}}));R(e)}else console.log("No data to export")},type:"primary",children:(0,g.jsx)(h.CSVLink,{data:P,filename:"stock_product.csv",children:"Download Stock CSV"})}),(0,g.jsx)(i.A,{showUploadList:!1,customRequest:e=>{let{file:t}=e;return y("products/import_img",t)},children:(0,g.jsx)(n.Ay,{type:"primary",icon:I?(0,g.jsx)(u.A,{}):(0,g.jsx)(p.A,{}),children:"Import Images"})}),(0,g.jsx)(i.A,{showUploadList:!1,customRequest:e=>{let{file:t}=e;return y("products/import",t)},children:(0,g.jsx)(n.Ay,{type:"primary",icon:I?(0,g.jsx)(u.A,{}):(0,g.jsx)(p.A,{}),children:"Import File"})})]})}),(0,g.jsx)("div",{className:"viewDetails",children:(0,g.jsx)(d.A,{autoFocus:!0,placeholder:"Title / Barcode / Scan code / Supplier Ref / Brand / Supplier / Location",value:S,onChange:e=>{const t=e.target.value;j(t),w((e=>({...e,search:t})))}})}),(0,g.jsx)(c.A,{className:"mainTable",loading:C,dataSource:null!==(e=null===q||void 0===q?void 0:q.data)&&void 0!==e?e:[],columns:b,pagination:{showQuickJumper:!0,total:null!==(t=null===q||void 0===q?void 0:q.count)&&void 0!==t?t:0,onChange:(e,t)=>{w((a=>({...a,skip:(e-1)*t,take:t})))}}})]})}}}]);
//# sourceMappingURL=440.9bf8cdf7.chunk.js.map